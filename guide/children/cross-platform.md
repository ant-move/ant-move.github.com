---
sidebar: auto
---


## 背景

转换器的编译工作只能尽量的覆盖微信小程序项目代码，但微信小程序平台和支付宝小程序平台还是存在不少的差异化是转换工具难以处理的，比如登录、支付、地图特定 API。基于以上的考虑， antmove 提供了一种支付宝代码与微信小程序代码混合编写的方式来适配双端。

## 如何使用

> 该功能应该只在必要的情况下使用，请勿滥用。

目前提供的双端方案是通过 if else 的形式来区分微信小程序代码和支付宝小程序代码，在编译的过程中会将非当前平台的代码去除，保证编译后代码的干净。同时当前方案还对微信小程序做了一个兼容，在无需编译的情况下直接支持微信小程序平台，这样就不会影响微信小程序原项目，无需增加新的编译流程，影响原项目的工程构建。

if 语句的书写需严格按照如下形式，不可更改字符（缩进可自行控制）。

### 示例

- 微信小程序代码

```js
if (wx.__target__ === 'alipay') {
	// 支付宝小程序代码
  	console.log('I am alipay mini-program.');
} else {
	// 微信小程序代码
  	console.log('I am wechat mini-program.');
}
```

- 支付宝小程序代码（通过工具转换到支付宝平台）

```javascript
console.log('I am alipay mini-program.');
```

## 其它平台

* 支付宝： alipay
* 微信： wx
* 百度： baidu
* 头条： tt
